---
import { getCollection, render } from 'astro:content'
import H2 from '../../components/H2.astro'
import Layout from '../../layouts/Layout.astro'
import { Image } from 'astro:assets'

export async function getStaticPaths() {
    const projects = await getCollection('projects')
    return projects.map((project) => ({
        params: {
            id: project.id,
        },
        props: {
            project,
        },
    }))
}

const { project } = Astro.props
const { Content } = await render(project)
---

<Layout>
    <H2>{project.data.title}</H2>
    {project.data.image ? <Image src={project.data.image} alt={project.data.imageAlt || ''} /> : null}
    <Content />
</Layout>
